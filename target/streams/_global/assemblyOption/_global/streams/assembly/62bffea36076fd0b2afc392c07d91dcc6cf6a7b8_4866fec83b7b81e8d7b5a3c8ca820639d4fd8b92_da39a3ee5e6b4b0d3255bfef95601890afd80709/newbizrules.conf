rules {
  catalogs {
  }

  channels {
    WEB {
      placements {
        banner {
          provider: "enablereactivacionpipeline"
        }
        resumendecuenta {
          provider: "resumendecuentapipeline"
        }
        paginadeexito {
          provider: "productosfinancierospipeline"
        }
        ALLRECS {
          provider: "allrecspipeline"
          recsNeeded: 1000
        }
        resumendecuenta_fallback {
          provider: "resumendecuenta_fallback"
        }
        banner_fallback {
          provider: "banner_fallback"
        }
        paginadeexito_fallback {
          provider: "paginadeexito_fallback"
        }
        fallback {
          provider: "fallback_provider"
        }
      }
    }
    BATCH {
      placements {
        ALLRECS {
          provider: "allrecspipeline"
          recsNeeded: 1000
        }
        fallback {
          provider: "fallback_provider"
        }
      }
    }
    TOTEM {
      placements {
        popuprapido {
          provider: "popuprapidopipeline"
          recsNeeded: 1
        }
        popupconfidencial {
          provider: "popupconfidencialpipeline"
          recsNeeded: 1

        }
        carruselinterno {
          provider: "carruselinternopipeline"
          recsNeeded: 3
        }
        ofertasparati {
          provider: "ofertasparatipipeline"
          recsNeeded: 1000

        }
        popupconfidencial_fallback {
          provider: "popupconfidencial_fallback"
        }
        carruselinterno_fallback {
          provider: "carruselinterno_fallback"
        }
        ofertasparati_fallback {
          provider: "ofertasparati_fallback"
          recsNeeded: 1000
        }
        fallback {
          provider: "empty_provider"
        }
      }
    }
    RETAIL{
      placements {
        lomasvisto {
          provider: "retail_provider"
          recsNeeded: 3
        }
        productoscomplementarios {
          provider: "retail_provider"
          recsNeeded: 2
        }
        fallback  {
          provider: "fallback_retail_provider"
        }
      }
    }

  }

  providers {

    popupconfidencial_fallback {
      providerType: "OrderedList"
      list: ["AVANCE_CAJA"]
    }
    carruselinterno_fallback {
      providerType: "OrderedList"
      list: ["PAT"]
    }

    ofertasparati_fallback {
      providerType: "OrderedList"
      list: ["AVANCE_CAJA", "PAT"]
    }

    resumendecuenta_fallback {
      providerType: "OrderedList"
      list: ["REPACTACION", "SUPER_AVANCE", "AVANCE_CAJA", "PAT"]
    }
    paginadeexito_fallback {
      providerType: "OrderedList"
      list: ["SUPER_AVANCE", "AVANCE_CAJA", "PAT"]
    }
    banner_fallback {
      providerType: "OrderedList"
      list: ["SUPER_AVANCE", "REPACTACION", "AVANCE_CAJA", "PAT"]
    }

    repactacion {
      providerType: "OrderedList"
      list: ["REPACTACION"]
    }

    acciones_reactivacion {
      providerType: "OrderedList"
      list: ["REACTIVACION"]
    }

    modeloproductosfinancieros {
      providerType: "PredictionModel"
      modelName: "singleclassificationmodel"
    }


    allrecspipeline {
      providerType: "Pipeline"
      providers: [
        {
          name: "acciones_reactivacion"
          recsNeeded: 1
          recsPriority: 0
        },
        {
          name: "modeloproductosfinancieros"
          recsNeeded: 1000
          recsPriority: 0
        },
        {
          name: "default"
          recsNeeded: 1
          recsPriority: 0
        }
      ]
    }

    productosfinancierospipeline {
      providerType: "Pipeline"
      providers: [
        {
          name: "modeloproductosfinancieros"
          recsNeeded: 1
          recsPriority: 0
        },
        {
          name: "default"
          recsNeeded: 1
          recsPriority: 0
        }
      ]
    }

    modelosexternospipeline1 {
      providerType: "Pipeline"
      providers: [
        {
          name: "lgbmv2"
          recsNeeded: 1
          recsPriority: 0
        },
        {
          name: "default"
          recsNeeded: 1
          recsPriority: 0
        }
      ]
    }
    modelosexternospipeline2 {
      providerType: "Pipeline"
      providers: [
        {
          name: "lrv2"
          recsNeeded: 1
          recsPriority: 0
        },
        {
          name: "default"
          recsNeeded: 1
          recsPriority: 0
        }
      ]
    }

    enablereactivacionpipeline {
      providerType: "Pipeline"
      providers: [
        {
          name: "acciones_reactivacion"
          recsNeeded: 1
          recsPriority: 0
        },
        {
          name: "productosfinancierospipeline",
          recsNeeded: 1
          recsPriority: 0
        }
      ]
    }

    resumendecuentapipeline {
      providerType: "Pipeline"
      providers: [
        {
          name: "repactacion"
          recsNeeded: 1
          recsPriority: 0
        },
        {
          name: "modeloproductosfinancieros"
          recsNeeded: 1
          recsPriority: 1
        },
        {
          name: "default"
          recsNeeded: 1
          recsPriority: 0
        }
      ]
    }

    default {
      providerType: "OrderedList"
      list: ["PAT"]
    }

    fallback_provider {
      providerType: "OrderedList"
      list: ["PAT"]
    }

    popuprapidopipeline {
      providerType: "Pipeline"
      providers: [
         {
           name: "acciones_reactivacion",
           recsNeeded: 1,
           recsPriority: 0
         },
         {
           name: "campaign_apertura",
           recsNeeded: 1
           recsPriority: 0
         }
      ]
    }

    popupconfidencialpipeline {
      providerType: "Pipeline",
      providers: [
         {
           name: "modeloproductosfinancieros"
           recsNeeded: 1,
           recsPriority: 0
         }
      ]
    }


    carruselinternopipeline {
      providerType: "Pipeline",
      providers: [
        {
          name: "modeloproductosfinancieros",
          recsNeeded: 1,
          recsPriority: 1
        },
        {
          name: "default"
          recsNeeded: 1,
          recsPriority: 0
        }
      ]
    }


    ofertasparatipipeline {
      providerType: "Pipeline",
      providers: [
        {
          name: "acciones_reactivacion"
          recsNeeded: 1000,
          recsPriority: 0
        },
        {
          name: "modeloproductosfinancieros",
          recsNeeded: 1,
          recsPriority: 0
        },
        {
          name: "campaign_totem",
          recsNeeded: 100,
          recsPriority: 0
        }
      ]
    }

    campaign_apertura {
      providerType: "OrderedList",
      list: ["APERTURA"]
    }

    campaign_totem: {
      providerType: "OrderedList",
      list: ["RENOVACION_PLASTICO", "REEMISION_CHIP", "ENROLAMIENTO", "SEGURO_AUTO", "SEGURO_VIDA", "SEGURO_SALUD"]
    }

    empty_provider {
      providerType: "OrderedList",
      list: []
    }

    retail_provider {
      providerType: "OrderedList",
      list: ["TELEVISORES", "HELADERAS", "LAVARROPAS", "TOSTADORAS"]
    }

    fallback_retail_provider {
      providerType: "OrderedList",
      list: ["TOSTADORAS"]
    }

  }

  rules: [
    # Amplification Rule for all products
    {
      "amplificationRuleTableRow": [
        {"amplification":1.0,"deviation":0.04,"mean":0.06,"product":"AUMENTO_CUPO"},
        {"amplification":1.0,"deviation":0.18,"mean":0.23,"product":"TRASPASO"},
        {"amplification":1.0,"deviation":0.23,"mean":0.42,"product":"AVANCE_CAJA"},
        {"amplification":1.0,"deviation":0.22,"mean":0.14,"product":"ADICIONAL"},
        {"amplification":1.4,"deviation":0.1,"mean":0.14,"product":"SUPER_AVANCE"},
        {"amplification":1.0,"deviation":0.09,"mean":0.1,"product":"REPACTACION"}
      ],
      "channels":[],
      "classname":"Amplification",
      "id":"test",
      "last":true,
      "placements":[]
    }
    # Super Avance --------------------------------------------------
    {
      "affectedProducts": [
        "AVANCE_CAJA"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": false,
      "id": "add-monto-ae",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "aeAmount"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "monto"
      }
    },
    {
      "affectedProducts": [
        "SUPER_AVANCE"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": true,
      "id": "add-monto-sae",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "saeAmount"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "monto"
      }
    },
    {
      "channels": [],
      "classname": "EventDecay",
      "id": "regla-decaimiento-sae",
      "placements": [],
      "product": "SUPER_AVANCE",
      "providers": ["modeloproductosfinancieros"],
      "blockIfNotPresent": true,
      "affectedProducts": [],
      "taoProfile": {
        "classname": "ShortTerm"
      }
      "offsetProfile": {
        "classname": "MediumImpact"
      }
    },
    {
      "id": "reglas-sae",
      "classname": "SimpleExpression",
      "affectedProducts": ["SUPER_AVANCE"],
      "ruleAction": {
        "classname": "EnableAction"
      }
      "expression": "(m3 or m6) and saeAmount > 0",
      "providers": ["modeloproductosfinancieros"]
    },
    {
      "affectedProducts": ["SUPER_AVANCE"],
      "channels": [],
      "classname": "SimpleRename",
      "id": "rename-sae",
      "last": false,
      "placements": [],
      "target": "subproduct"
      "targetExpression": {
        "classname": "ConstantFeatureExpression",
        "feature": "tasa_preferencial_SAE"
      }
    },
    {
      "id": "reglas-sae-fallback",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["SUPER_AVANCE"],
      "expression": "saeAmount > 0",
      "providers": ["paginadeexito_fallback", "resumendecuenta_fallback", "banner_fallback"]
    },
    {
      "affectedProducts": [
        "SUPER_AVANCE"
      ],
      "channels": [],
      "classname": "ExtradataRule",
      "extradataName": "SAE099",
      "providers": ["modeloproductosfinancieros"],
      "id": "sae099",
      "last": false,
      "placements": [],
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "SAE099"
      }
    }
    {
      "affectedProducts": ["SUPER_AVANCE"],
      "channels": [],
      "classname": "ExtradataRule",
      "providers": ["modeloproductosfinancieros"],
      "extradataName": "SAE089",
      "id": "sae089",
      "last": false,
      "placements": [],
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "SAE089"
      }
    },
    {
      "affectedProducts": [
        "SUPER_AVANCE"
      ],
      "channels": [],
      "classname": "ExtradataRule",
      "providers": ["modeloproductosfinancieros"],
      "extradataName": "SAE079",
      "id": "sae079",
      "last": false,
      "placements": [],
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "SAE079"
      }
    },

    # Avance de caja ----------------------------------------------
    {
      "channels": [],
      "classname": "EventDecay",
      "id": "regla-decaimiento-ae",
      "placements": [],
      "product": "AVANCE_CAJA",
      "providers": ["modeloproductosfinancieros"],
      "blockIfNotPresent": true,
      "affectedProducts": [],
      "taoProfile": {
        "classname": "ShortTerm"
      }
      "offsetProfile": {
        "classname": "MediumImpact"
      }
    },
    {
      "id": "reglas-ae",
      "providers": ["modeloproductosfinancieros"]
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["AVANCE_CAJA"],
      "expression": "(m2 or m5) and aeAmount >= 50000"
    },
    {
      "id": "reglas-ae-fallback",
      "providers": ["paginadeexito_fallback", "resumendecuenta_fallback", "banner_fallback"],
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["AVANCE_CAJA"],
      "expression": "aeAmount >= 50000"
    },

    {
      "id": "reglas-ae-fallback-totem",
      "providers": ["popupconfidencial_fallback", "ofertasparati_fallback"],
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["AVANCE_CAJA"],
      "expression": "aeAmount > 0"
    },


    # Traspaso --------------------------------------------
    {
      "channels": [],
      "classname": "EventDecay",
      "id": "regla-decaimiento-traspaso",
      "placements": [],
      "product": "TRASPASO",
      "blockIfNotPresent": true,
      "affectedProducts": [],
      "taoProfile": {
        "classname": "LongTerm"
      }
      "offsetProfile": {
        "classname": "HighImpact"
      }
    },
    {
      "affectedProducts": [
        "TRASPASO",
        "TRASPASO_TARJETA_CERRADA",
        "TRASPASO_TARJETA_ABIERTA"
      ],
      "channels": [],
      "classname": "SimpleRename",
      "id": "rename-traspasos",
      "last": false,
      "placements": [],
      "target": "product"
      "targetExpression": {
        "classname": "ConstantExpression",
        "name": "TRASPASO"
      }
    },
    {
      "id": "reglas-traspaso",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["TRASPASO"],
      "expression": "con_tarjetas_cerradas and !sin_bloqueos and !preventivo"
    },
    {
      "affectedProducts": [
        "TRASPASO"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": true,
      "id": "add-peor_afinidad",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "extraData:peor_afinidad"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "peor_afinidad"
      }
    },
    {
      "id": "reglas-traspaso-normal",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "TRASPASO_NORMAL",
      }
      "affectedProducts": ["TRASPASO"],
      "expression": "cupoNac < 1500000 or peor_afinidad >= 3"
    },
    {
      "id": "reglas-traspaso-platinum",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "TRASPASO_PLATINUM"
      }
      "affectedProducts": ["TRASPASO"],
      "expression": "cupoNac >= 1500000 and cupoNac < 2500000 and peor_afinidad < 3"
    },
    {
      "id": "reglas-traspaso-black",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "TRASPASO_BLACK",
      }
      "affectedProducts": ["TRASPASO"],
      "expression": "cupoNac >= 2500000 and peor_afinidad < 3"
    },
    {
      "affectedProducts": [
        "TRASPASO"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": true,
      "id": "add-monto-traspaso",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "cardAmount"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "monto"
      }
    },

    # Aumento de cupo -----------------------------------
    {
      "channels": [],
      "classname": "EventDecay",
      "id": "regla-decaimiento-aumentocupo",
      "placements": [],
      "product": "AUMENTO_CUPO",
      "blockIfNotPresent": true,
      "affectedProducts": [],
      "taoProfile": {
        "classname": "LongTerm"
      }
      "offsetProfile": {
        "classname": "HighImpact"
      }
    },
    {
      "id": "reglas-aumentocupo",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["AUMENTO_CUPO"],
      "expression": "m1 or m4"
    },
    {
      "affectedProducts": [
        "AUMENTO_CUPO"
      ],
      "channels": [],
      "classname": "ExtradataRule",
      "extradataName": "AUM",
      "id": "aumento_cupo",
      "last": true,
      "placements": [],
      "ruleAction": {
        "classname": "EnableAction"
      }
    },


    # Repactación -------------------------------------
    {
      "channels": [],
      "classname": "SimplePushDown",
      "distance": 0.6,
      "id": "pushdown-repactacion",
      "providers": ["modeloproductosfinancieros"],
      "placements": [],
      "product": "REPACTACION",
      "affectedProducts": []
    },
    {
      "channels": [],
      "classname": "EventDecay",
      "id": "regla-decaimiento-repa",
      "placements": [],
      "providers": ["modeloproductosfinancieros"],
      "product": "REPACTACION",
      "blockIfNotPresent": true,
      "affectedProducts": [],
      "taoProfile": {
        "classname": "ShortTerm"
      }
      "offsetProfile": {
        "classname": "LowImpact"
      }
    },
    {
      "id": "reglas-repactacion",
      "providers": ["modeloproductosfinancieros"],
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["REPACTACION"],
      "expression": "(m1 or m4) and enableREPACTACION"
    },
    {
      "id": "reglas-repactacion-fallback",
      "providers": ["paginadeexito_fallback", "resumendecuenta_fallback", "banner_fallback"],
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["REPACTACION"],
      "expression": "enableREPACTACION"
    },
    {
      "id": "recenciaREPA",
      "classname": "DateRule",
      "providers": ["modeloproductosfinancieros"],
      "blockIfNotPresent": "false",
      "affectedProducts": ["REPACTACION"],
      "parameterExpression": {
        "classname": "ConstantExpression",
        "name": "recencias_fechaUltimoREPACTACION"
      },
      "dateValidation": {
        "classname": "SameMonth",
        "shouldBeTrue": false
      }
    },
    {
      "affectedProducts": [
        "REPACTACION"
      ],
      "channels": [],
      "classname": "ExtradataRule",
      "providers": ["modeloproductosfinancieros"],
      "extradataName": "REP",
      "id": "repactacion",
      "last": false,
      "placements": [],
      "ruleAction": {
        "classname": "EnableAction"
      }
    },

    # Reactivación -------------------------------------------------------------
    {
      "id": "reglas-reactivacion",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }
      "affectedProducts": ["REACTIVACION"],
      "expression": "(m1 or m4) and inactivo"
    },
    {
      "id": "reglas-reactivacion-vinculado",
      "classname": "SimpleExpression",
      "affectedProducts": ["REACTIVACION"],
      "expression": "segmento = 'vinculado'"
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "REACTIVACION_PUNTOS",
      }
    },
    {
      "id": "reglas-reactivacion-novinculado",
      "classname": "SimpleExpression",
      "affectedProducts": ["REACTIVACION"],
      "expression": "segmento != 'vinculado'"
      "ruleAction": {
        "classname": "TransformAction",
        "targetProduct": "REACTIVACION_DINERO",
      }
    },

    # Adicionaes -------------------------------------------------------------
    {
      "channels": [],
      "classname": "SimplePushDown",
      "distance": 0.7,
      "id": "pushdown-adicionales",
      "placements": [],
      "product": "ADICIONAL",
      "affectedProducts": []
    },
    {
      "channels": [],
      "classname": "EventDecay",
      "id": "regla-decaimiento-adicional",
      "placements": [],
      "product": "ADICIONAL",
      "blockIfNotPresent": true,
      "affectedProducts": [],
      "taoProfile": {
        "classname": "LongTerm"
      }
      "offsetProfile": {
        "classname": "HighImpact"
      }

    },
    {
      "id": "reglas-adicional",
      "classname": "SimpleExpression",
      "ruleAction": {
        "classname": "EnableAction"
      }

      "affectedProducts": ["ADICIONAL"],
      "expression": "m4 and con_tarjetas_abiertas and cantidad_adicionales = 0"
    },

    #Totem --------------------------------------------------------------------
    {
      "affectedProducts": ["APERTURA"],
      "channels": ["TOTEM"],
      "classname": "ExtradataRule",
      "extradataName": "apertura",
      "id": "apertura-tipo_producto",
      "last": false,
      "placements": ["popuprapido"],
      "blockIfNotPresent": true,
      "ruleAction": {
        "classname": "EnableAction"
       }
    },

    {
      "affectedProducts": ["RENOVACION_PLASTICO", "REEMISION_CHIP", "ENROLAMIENTO", "SEGURO_AUTO", "SEGURO_VIDA", "SEGURO_SALUD"],
      "channels": ["TOTEM"],
      "blockIfNotPresent": false,
      "classname": "ExtradataRule",
      "extradataName": "apertura-tipo_producto",
      "id": "disable-campaign-totem",
      "last": false,
      "placements": ["ofertasparati"],
      "ruleAction": {
        "classname": "DisableAction"
      }
    },

    {
      "affectedProducts": [
        "SEGURO_AUTO", "RENOVACION_PLASTICO", "APERTURA"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": true,
      "id": "add-nombre-cliente",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "userName"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "nombre"
      }
    },

    {
      "affectedProducts": [
        "SEGURO_AUTO"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": true,
      "id": "add-marca-auto",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "extraData:seguro-auto-marca"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "marca"
      }
    },

    {
      "affectedProducts": [
        "APERTURA"
      ],
      "channels": [],
      "classname": "AddArg",
      "discardIfNotPresent": true,
      "id": "add-apertura-monto",
      "inputParameterExpression": {
        "classname": "ConstantExpression",
        "name": "extraData:apertura-monto"
      },
      "last": false,
      "placements": [],
      "targetArgExpression": {
        "classname": "ConstantExpression",
        "name": "monto"
      }
    },

    {
      "affectedProducts": [
        "APERTURA"
      ],
      "channels": [],
      "classname": "ExtradataRule",
      "extradataName": "apertura-tipo_producto",
      "providers": [],
      "id": "tipo-apertura",
      "last": false,
      "placements": [],
      "ruleAction": {
        "classname": "ConditionalTransformAction",
        "target": "product",
        "valueMap" : {
          "default": "APERTURA_NORMAL",
          "001": "APERTURA_NORMAL",
          "002": "APERTURA_PLATINUM",
          "003": "APERTURA_BLACK",
        }
      }
    },

    {
      "affectedProducts": [
        "TRASPASO"
      ],
      "channels": [],
      "classname": "ExtradataRule",
      "extradataName": "traspaso-tipo_producto",
      "providers": [],
      "id": "tipo-traspaso",
      "last": false,
      "placements": [],
      "ruleAction": {
        "classname": "ConditionalTransformAction",
        "target": "product",
        "valueMap" : {
          "default": "TRASPASO_NORMAL",
          "001": "TRASPASO_NORMAL",
          "002": "TRASPASO_PLATINUM",
          "003": "TRASPASO_BLACK",
        }
      }
    }

  ]
}

//newrules {
//    catalogs {
//    }
//
//    channels {
//        WEB {
//            placements {
//                banner {
//                    provider: "enablereactivacionpipeline"
//                }
//                resumendecuenta {
//                    provider: "resumendecuentapipeline"
//                }
//                paginadeexito {
//                    provider: "productosfinancierospipeline"
//                }
//                ALLRECS {
//                    provider: "productosfinancierospipeline"
//                    recsNeeded: 1000
//                }
//                fallback {
//                    provider: "fallback"
//                }
//            }
//        }
//        BATCH {
//            placements {
//                ALLRECS {
//                    provider: "productosfinancierospipeline"
//                    recsNeeded: 1000
//                }
//                fallback {
//                    provider: "fallback"
//                }
//            }
//        }
//    }
//
//    providers {
//
//
//        fuga {
//          providerType: "PredictionModel"
//          modelName: "fugaclassificationmodel"
//        }
//
//        acciones_fuga {
//          providerType: "OrderedList"
//          list: ["REACTIVACION"]
//        }
//
//        venta_con_tarjeta {
//          providerType: "PredictionModel"
//          modelName: "reactivacionyprofundizacionmodel"
//        }
//
//        repactacion {
//          providerType: "OrderedList"
//          list: ["REPACTACION"]
//        }
//
//        acciones_reactivacion {
//          providerType: "OrderedList"
//          list: ["REACTIVACION"]
//        }
//
//
//
//        tratarReactivacionOFuga {
//           providerType: "OrderedList"
//           list: ["TRATAR_REACTIVACION_O_FUGA"]
//        }
//
//        modeloproductosfinancieros {
//          providerType: "PredictionModel"
//          modelName: "singleclassificationmodel"
//        }
//
//        productosfinancierospipeline {
//          providerType: "Pipeline"
//          providers: [
//            {
//              name: "modeloproductosfinancieros"
//              recsNeeded: 1
//              recsPriority: 0
//            },
//            {
//              name: "default"
//              recsNeeded: 1
//              recsPriority: 0
//            }
//          ]
//        }
//
//        enablereactivacionpipeline {
//          providerType: "Pipeline"
//          providers: [
//            {
//              name: "acciones_reactivacion"
//              recsNeeded: 1
//              recsPriority: 0
//            },
//            {
//              name: "productosfinancierospipeline",
//              recsNeeded: 1
//              recsPriority: 0
//            }
//          ]
//        }
//
//        resumendecuentapipeline {
//          providerType: "Pipeline"
//          providers: [
//            {
//              name: "repactacion"
//              recsNeeded: 1
//              recsPriority: 0
//            },
//            {
//              name: "productosfinancierospipeline"
//              recsNeeded: 1
//              recsPriority: 1
//            }
//          ]
//        }
//
//        default {
//          providerType: "OrderedList"
//          list: ["PAT"]
//        }
//
//        fallback {
//            providerType: "OrderedList"
//            list: ["PAT"]
//        }
//
//    }
//
//    rules: [
//      {
//        "id": "recenciaREPA",
//        "classname": "DateRule",
//        "blockIfNotPresent": "false",
//        "affectedProducts": ["REPACTACION"],
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "recencias_fechaUltimoREPACTACION"
//        },
//        "dateValidation": {
//            "classname": "SameMonth",
//            "shouldBeTrue": false
//        }
//      },
//      # Validar que la reactivación sea para clientes inactivos (sino se tira)
//      {
//        "id": "tratar-reactivacion-o-fuga",
//        "classname": "ValueInList",
//        "affectedProducts": [ "TRATAR_REACTIVACION_O_FUGA"],
//        "blockIfNotPresent": true,
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "inactivo"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      # Dada la reactivación, invocar al modelo de fuga (devuelve FUGA / NO_FUGA)
//      {
//        "id": "inactivo-entonces-fuga",
//        "classname": "ProviderRule",
//        "affectedProducts": ["TRATAR_REACTIVACION_O_FUGA"],
//        "provider": "fuga"
//      },
//      # Si es válida la fuga, insertar acciones de fuga
//      {
//        "id": "acciones-fuga",
//        "classname": "ProviderRule",
//        "affectedProducts": ["FUGA"],
//        "provider": "acciones_fuga"
//      },
//      # Si no es fuga, insertar acciones reactivación
//      {
//        "id": "acciones-inactivo-no-fuga",
//        "classname": "ProviderRule",
//        "affectedProducts": ["NoFuga"],
//        "provider": "venta_con_tarjeta"
//      }
//      {
//        "id": "marcas-sae",
//        "classname": "ParameterFolderRule",
//        "channels": [],
//        "placements": [],
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "parameterNames": ["m3", "m6"]
//        "targetName": "enableSAE",
//        "folderClassname": "OrFolder"
//      },
//      {
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "enableSAE",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "enableSAE"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "id": "marcas-ae",
//        "classname": "ParameterFolderRule",
//        "channels": [],
//        "placements": [],
//        "affectedProducts": [
//          "AVANCE_CAJA"
//        ],
//        "parameterNames": ["m2", "m5"]
//        "targetName": "enableAE",
//        "folderClassname": "OrFolder"
//      },
//      {
//        "affectedProducts": [
//          "AVANCE_CAJA"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "enableAE",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "enableAE"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "id": "marcas-traspaso",
//        "classname": "ParameterFolderRule",
//        "channels": [],
//        "placements": [],
//        "affectedProducts": [
//          "TRASPASO"
//        ],
//        "parameterNames": ["m1", "m7"]
//        "targetName": "enableTraspaso",
//        "folderClassname": "AndFolder"
//      },
//      {
//        "affectedProducts": [
//          "TRASPASO"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "enableTraspaso",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "enableTraspaso"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "id": "marcas-aumentocuporepactacionreactivacion",
//        "classname": "ParameterFolderRule",
//        "channels": [],
//        "placements": [],
//        "affectedProducts": [
//          "AUMENTO_CUPO", "REPACTACION", "REACTIVACION"
//        ],
//        "parameterNames": ["m1", "m4"]
//        "targetName": "enableTraspasoRepactacionReactivacion",
//        "folderClassname": "OrFolder"
//      },
//      {
//        "affectedProducts": [
//          "AUMENTO_CUPO", "REPACTACION", "REACTIVACION"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "enableTraspasoRepactacionReactivacion",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "enableTraspasoRepactacionReactivacion"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "affectedProducts": [
//          "REACTIVACION"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "reactivacion",
//        "last": true,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "inactivo"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "affectedProducts": [
//          "ADICIONAL"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "enableAdicionalIfM4",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "m4"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "channels": [],
//        "classname": "SimplePushDown",
//        "distance": 0.7,
//        "id": "pushdown-adicionales",
//        "placements": [],
//        "product": "ADICIONAL",
//        "affectedProducts": []
//      },
//      {
//        "channels": [],
//        "classname": "SimplePushDown",
//        "distance": 0.6,
//        "id": "pushdown-repactacion",
//        "placements": [],
//        "product": "REPACTACION",
//        "affectedProducts": []
//      },
//      {
//        "affectedProducts": [
//          "AVANCE_CAJA"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInRange",
//        "id": "monto-minimo-ae",
//        "last": false,
//        "ogreaterthan": 50000.0,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "aeAmount"
//        },
//        "placements": []
//      },
//      {
//        "affectedProducts": [
//          "AVANCE_CAJA"
//        ],
//        "channels": [],
//        "classname": "AddArg",
//        "discardIfNotPresent": false,
//        "id": "add-monto-ae",
//        "inputParameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "aeAmount"
//        },
//        "last": false,
//        "placements": [],
//        "targetArgExpression": {
//          "classname": "ConstantExpression",
//          "name": "monto"
//        }
//      },
//      {
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInRange",
//        "id": "monto-minimo-sae",
//        "last": false,
//        "ogreaterthan": 1.0,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "saeAmount"
//        },
//        "placements": []
//      },
//      {
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "channels": [],
//        "classname": "AddArg",
//        "discardIfNotPresent": true,
//        "id": "add-monto-sae",
//        "inputParameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "saeAmount"
//        },
//        "last": false,
//        "placements": [],
//        "targetArgExpression": {
//          "classname": "ConstantExpression",
//          "name": "monto"
//        }
//      },
//      {
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "channels": [],
//        "classname": "ExtradataRule",
//        "extradataName": "SAE099",
//        "id": "sae099",
//        "last": false,
//        "placements": [],
//        "ruleAction": {
//          "classname": "TransformAction",
//          "targetSubproduct": "SAE099",
//          "targetProduct": "SUPER_AVANCE"
//        }
//      },
//      {
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "channels": [],
//        "classname": "ExtradataRule",
//        "extradataName": "SAE089",
//        "id": "sae089",
//        "last": false,
//        "placements": [],
//        "ruleAction": {
//          "classname": "TransformAction",
//          "targetProduct": "SUPER_AVANCE",
//          "targetSubproduct": "SAE089"
//        }
//      },
//      {
//        "affectedProducts": [
//          "SUPER_AVANCE"
//        ],
//        "channels": [],
//        "classname": "ExtradataRule",
//        "extradataName": "SAE079",
//        "id": "sae079",
//        "last": false,
//        "placements": [],
//        "ruleAction": {
//          "classname": "TransformAction",
//          "targetProduct": "SUPER_AVANCE",
//          "targetSubproduct": "SAE079"
//        }
//      },
//      {
//        "affectedProducts": [
//          "TRASPASO",
//          "TRASPASO_TARJETA_CERRADA",
//          "TRASPASO_TARJETA_ABIERTA"
//        ],
//        "channels": [],
//        "classname": "SimpleRenameProduct",
//        "id": "rename-traspasos",
//        "last": false,
//        "placements": [],
//        "targetProductExpression": {
//          "classname": "ConstantExpression",
//          "name": "TRASPASO"
//        }
//      },
//      {
//        "affectedProducts": [
//          "TRASPASO"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "traspaso",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "con_tarjetas_abiertas"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "false"
//        ]
//      },
//      {
//        "affectedProducts": [
//          "TRASPASO"
//        ],
//        "channels": [],
//        "classname": "AddArg",
//        "discardIfNotPresent": true,
//        "id": "add-monto-traspaso",
//        "inputParameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "cardAmount"
//        },
//        "last": false,
//        "placements": [],
//        "targetArgExpression": {
//          "classname": "ConstantExpression",
//          "name": "monto"
//        }
//      },
//      {
//        "affectedProducts": [
//          "ADICIONAL"
//        ],
//        "blockIfNotPresent": true,
//        "channels": [],
//        "classname": "ValueInList",
//        "id": "adicional-con-tjta-abierta",
//        "last": false,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "con_tarjetas_abiertas"
//        },
//        "placements": [],
//        "safelist": true,
//        "values": [
//          "true"
//        ]
//      },
//      {
//        "affectedProducts": [
//          "ADICIONAL"
//        ],
//        "blockIfNotPresent": false,
//        "channels": [],
//        "classname": "ValueInRange",
//        "id": "adicional-sin-adicionales",
//        "last": false,
//        "olessthan": 0.0,
//        "parameterExpression": {
//          "classname": "ConstantExpression",
//          "name": "cantidad_adicionales"
//        },
//        "placements": []
//      },
//      {
//        "affectedProducts": [
//          "REPACTACION"
//        ],
//        "channels": [],
//        "classname": "ExtradataRule",
//        "extradataName": "REP",
//        "id": "repactacion",
//        "last": false,
//        "placements": [],
//        "ruleAction": {
//          "classname": "EnableAction"
//        }
//      },
//      {
//        "affectedProducts": [
//          "AUMENTO_CUPO"
//        ],
//        "channels": [],
//        "classname": "ExtradataRule",
//        "extradataName": "AUM",
//        "id": "aumento_cupo",
//        "last": true,
//        "placements": [],
//        "ruleAction": {
//          "classname": "EnableAction"
//        }
//      },
//      {
//        "channels": [],
//        "classname": "EventDecay",
//        "id": "regla-decaimiento-adicional",
//        "placements": [],
//        "product": "ADICIONAL",
//        "blockIfNotPresent": true,
//        "affectedProducts": [],
//        "taoProfile": {
//          "classname": "LongTerm"
//        }
//        "offsetProfile": {
//          "classname": "HighImpact"
//        }
//
//      },
//      {
//        "channels": [],
//        "classname": "EventDecay",
//        "id": "regla-decaimiento-sae",
//        "placements": [],
//        "product": "SUPER_AVANCE",
//        "blockIfNotPresent": true,
//        "affectedProducts": [],
//        "taoProfile": {
//          "classname": "ShortTerm"
//        }
//        "offsetProfile": {
//          "classname": "LowImpact"
//        }
//      },
//      {
//        "channels": [],
//        "classname": "EventDecay",
//        "id": "regla-decaimiento-repa",
//        "placements": [],
//        "product": "REPACTACION",
//        "blockIfNotPresent": true,
//        "affectedProducts": [],
//        "taoProfile": {
//          "classname": "MediumTerm"
//        }
//        "offsetProfile": {
//          "classname": "HighImpact"
//        }
//      },
//      {
//        "channels": [],
//        "classname": "EventDecay",
//        "id": "regla-decaimiento-aumentocupo",
//        "placements": [],
//        "product": "AUMENTO_CUPO",
//        "blockIfNotPresent": true,
//        "affectedProducts": [],
//        "taoProfile": {
//          "classname": "ShortTerm"
//        }
//        "offsetProfile": {
//          "classname": "HighImpact"
//        }
//      },
//      {
//        "channels": [],
//        "classname": "EventDecay",
//        "id": "regla-decaimiento-ae",
//        "placements": [],
//        "product": "AVANCE_CAJA",
//        "blockIfNotPresent": true,
//        "affectedProducts": [],
//        "taoProfile": {
//          "classname": "LongTerm"
//        }
//        "offsetProfile": {
//          "classname": "LowImpact"
//        }
//      },
//      {
//        "channels": [],
//        "classname": "EventDecay",
//        "id": "regla-decaimiento-traspaso",
//        "placements": [],
//        "product": "TRASPASO",
//        "blockIfNotPresent": true,
//        "affectedProducts": [],
//        "taoProfile": {
//          "classname": "LongTerm"
//        }
//        "offsetProfile": {
//          "classname": "HighImpact"
//        }
//      }
//      //,
//      //{
//        //"affectedProducts": [
//          //"REPACTACION"
//        //],
//        //"channels": [],
//        //"placements": ["paginadeexito"],
//        //"classname": "DisableProduct",
//        //"id": "bloquear-repactacion-paginadeexito",
//        //"last": true,
//      //}
//    ]
//}
